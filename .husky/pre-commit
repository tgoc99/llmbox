#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run Deno check task before committing
echo "ğŸ” Running pre-commit checks..."

# Auto-format
echo "ğŸ“ Auto-formatting code..."
deno fmt

# Lint
echo "ğŸ” Linting code..."
deno lint || {
  echo "âŒ Linting failed. Fix the issues above."
  exit 1
}

# Type check
echo "ğŸ”§ Type checking..."
deno task type-check || {
  echo "âŒ Type checking failed. Fix the type errors above."
  exit 1
}

# Unit tests
echo "ğŸ§ª Running unit tests..."
deno task test:unit || {
  echo "âŒ Unit tests failed. Fix the failing tests above."
  exit 1
}

# Contract tests
echo "ğŸ“‹ Running contract tests..."
deno task test:contract || {
  echo "âŒ Contract tests failed. Fix the failing tests above."
  exit 1
}

echo "âœ… All pre-commit checks passed!"

